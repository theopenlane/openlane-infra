# top level values
domain: "theopenlane.io"
# core app values
openlane:
  pdb:
    minAvailable: 2
  secret:
    create: true
  config:
    create: true
  coreConfiguration:
    server:
      csrfprotection:
        enabled: true
        sameSite: "None"
        cookieDomain: ".theopenlane.io"
      graphpool:
        maxWorkers: 200
      complexitylimit: 200
      defaulttrustcenterdomain: "trust.theopenlane.net"
      trustcentercnametarget: "cname.openlane-dns.com"
      cors:
        enabled: true
        alloworigins:
          - https://console.theopenlane.io
          - https://www.theopenlane.io
          - https://studio.apollographql.com
          - https://docs.theopenlane.io
          - https://*openlane*.vercel.app
          - https://trust.theopenlane.net
      secure:
        hstsmaxage: "31536000"
    db:
      maxconnections: 8
      maxidleconnections: 8
      migrationprovider: goose
      enablehistory: true
      databasename: prod-openlane-db
    jobqueue:
      metrics:
        enablemetrics: true
        metricsdurationunit: "s"
    authz:
      enabled: true
      hosturl: http://openfga.openfga.svc.cluster.local:8080
    auth:
      token:
        kid: "16FFBS79AZ12168N0RAW3CEAGG"
        generatekeys: false
      supportedproviders: # note this is not currently used, but adding to ensure future compatibility
        - github
        - google
        - webauthn
      providers:
        # redirect url for sso logins
        redirecturl: "https://console.theopenlane.io/login/sso"
        github:
          clientid: "Ov23liFCzRTms6uIou68"
        google:
          clientid: "45405492545-7emofbtcl8vd81rqc4af1eqb7mtuca83.apps.googleusercontent.com"
    sessions:
      samesite: "None"
      domain: ".theopenlane.io" # todo: allow this to work with the domain, need the "." prefix
    redis:
      address: "10.252.1.3:6379"
    email:
      templatespath: "/brandedemails"
      companyname: "Openlane"
      corporation: "theopenlane Inc."
      companyaddress: "5150 Broadway St · San Antonio · TX 78209"
      fromemail: "support@mail.theopenlane.io"
      year: "2025"
      logourl: "https://www.theopenlane.io/cdn-cgi/imagedelivery/2gi-D0CFOlSOflWJG-LQaA/12e42452-e66e-4bae-0011-45a3f2cb6200/public"
    objectstorage:
      enabled: true
      maxsizemb: 100
      providers:
        s3:
          enabled: true
          ensureavailable: true
          region: "us-east-2"
          bucket: "opln"
          baseurl: "https://api.theopenlane.io/v1/files"
          proxypresignenabled: false
        cloudflarer2:
          enabled: true
          ensureavailable: true
          bucket: "ol-trust-center"
          region: "WNAM"
          baseurl: "https://api.theopenlane.io/v1/files"
          proxypresignenabled: false
    entconfig:
      entitytypes:
        - "vendor"
      modules:
        enabled: true
      emailvalidation:
        enabled: true
        allowedemailtypes:
          role: true
      billing:
        requirepaymentmethod: true
        bypassemaildomains: ["theopenlane.io"]
      maxpoolsize: 200
    subscription:
      enabled: true
      stripebillingportalsuccessurl: "https://console.theopenlane.io/organization-settings/billing"
    keywatcher:
      enabled: true
      keydir: "/keys"
    integrationoauthprovider:
      github:
        clientid: "Ov23li4ZVNEkKhrdBZu5"
        scopes: ["read:user", "user:email", "repo"]
      slack:
        clientid: "7576222813318.8026395673346"
        scopes: ["chat:write", "channels:read"]
    ratelimit:
      enabled: true
      dryrun: true
# riverboat values
riverboat:
  secret:
    create: true
  config:
    create: true
  workers:
    emailworker:
      enabled: true
    deleteexportcontentworker:
      enabled: true
    exportcontentworker:
      enabled: true
    customdomainworker:
      enabled: true
      openlaneapihost: "https://api.theopenlane.io"
    watermarkdocworker:
      enabled: true
      openlaneapihost: "https://api.theopenlane.io"