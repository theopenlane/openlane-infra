{{- if .Values.enabled }}
apiVersion: configcontroller.cnrm.cloud.google.com/v1alpha1
kind: ConfigControllerInstance
metadata:
  name: {{ .Values.configController.name | quote }}
  namespace: {{ include "gcp-config-controller.namespace" . }}
spec:
  projectRef:
    external: {{ .Values.configController.projectRef.external | quote }}
    {{- if .Values.configController.projectRef.name }}
    name: {{ .Values.configController.projectRef.name | quote }}
    {{- end }}
    {{- if .Values.configController.projectRef.namespace }}
    namespace: {{ .Values.configController.projectRef.namespace | quote }}
    {{- end }}
  location: {{ .Values.configController.location | quote }}
  {{- if .Values.configController.resourceID }}
  resourceID: {{ .Values.configController.resourceID | quote }}
  {{- end }}
  usePrivateEndpoint: {{ .Values.configController.usePrivateEndpoint }}
  managementConfig:
    fullManagementConfig:
      clusterCidrBlock: {{ .Values.configController.managementConfig.fullManagementConfig.clusterCidrBlock | quote }}
      clusterNamedRange: {{ .Values.configController.managementConfig.fullManagementConfig.clusterNamedRange | quote }}
      manBlock: {{ .Values.configController.managementConfig.fullManagementConfig.manBlock | quote }}
      masterIPv4CidrBlock: {{ .Values.configController.managementConfig.fullManagementConfig.masterIPv4CidrBlock | quote }}
      networkRef:
        external: {{ .Values.configController.managementConfig.fullManagementConfig.networkRef.external | quote }}
      servicesCidrBlock: {{ .Values.configController.managementConfig.fullManagementConfig.servicesCidrBlock | quote }}
      servicesNamedRange: {{ .Values.configController.managementConfig.fullManagementConfig.servicesNamedRange | quote }}
    standardManagementConfig:
      clusterCidrBlock: {{ .Values.configController.managementConfig.standardManagementConfig.clusterCidrBlock | quote }}
      clusterNamedRange: {{ .Values.configController.managementConfig.standardManagementConfig.clusterNamedRange | quote }}
      manBlock: {{ .Values.configController.managementConfig.standardManagementConfig.manBlock | quote }}
      masterIPv4CidrBlock: {{ .Values.configController.managementConfig.standardManagementConfig.masterIPv4CidrBlock | quote }}
      networkRef:
        external: {{ .Values.configController.managementConfig.standardManagementConfig.networkRef.external | quote }}
      servicesCidrBlock: {{ .Values.configController.managementConfig.standardManagementConfig.servicesCidrBlock | quote }}
      servicesNamedRange: {{ .Values.configController.managementConfig.standardManagementConfig.servicesNamedRange | quote }}
{{- end }}
