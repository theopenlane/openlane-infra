# charts/openlane-gcp-bootstrap/values-dev.yaml
# --- Environment-Specific Overrides for 'dev' ---

# --- GENERAL ENVIRONMENT CONTEXT (Passed to all downstream charts for naming/context) ---
env:
  name: "dev"
  capitalizedName: "Dev"
# (Must be at the top level of the file)

# --- GLOBAL OVERRIDES FOR 'DEV' ---
# These override values.yaml defaults only when values-dev.yaml is used.
orgId: "YOUR_DEV_GCP_ORGANIZATION_ID" # IMPORTANT: REPLACE ME!
billingAccountId: "YOUR_DEV_BILLING_ACCOUNT_ID" # IMPORTANT: REPLACE ME!
commonAppConfig:
  primaryRegion: "us-east4" # Dev environments typically stay in one region
  gkeCluster:
    # Example: Dev GKE might not need specific masterAuthorizedNetworksConfig, or might be smaller
    masterAuthorizedNetworksConfig: { enabled: false }
    nodeCount: 1 # Default node count smaller for dev
    machineType: "e2-medium"
    nodePools:
      - name: "gke-primary" # Default node pool name, can be overridden in specific projects
        nodeCount: 1 # Smaller for dev
        machineType: "e2-medium" # Smaller machine type for dev
  bigquery:
    cmekEnabled: false # Often no CMEK in Dev
  storage:
    cmekEnabled: false # Often no CMEK in Dev

# --- PROJECT TYPE ACTIVATION AND CONFIGURATION FOR 'DEV' ENVIRONMENT ---
# These sections enable and configure specific project types for the 'dev' environment.
# They will override the 'enabled: false' defaults from values.yaml.

# 1. Shared VPC Host Project (Dev)
sharedVpcHost:
  enabled: true
  project:
    name: "openlane-shared-vpc-host-dev" # Full KCC Project resource name (GCP ID)
    id: "" # Hydrated numerical project ID
    gcpProjectName: "Openlane Shared VPC Host (Dev)"
    folderRef: "folders/openlane-org-shared-infra-dev" # KCC Folder resource name
  network: # Overrides default network name from values.yaml blueprint
    name: "openlane-shared-vpc-dev" # Unique to dev
    gkePrimary:     { name: "openlane-gke-primary-dev", ipCidrRange: "10.0.0.0/20", privateIpGoogleAccess: true }
    gkePodsSecondary: { name: "gke-pods", ipCidrRange: "10.0.32.0/16" }
    gkeServicesSecondary: { name: "gke-services", ipCidrRange: "10.0.16.0/20" }
    internalApps:   { name: "openlane-internal-apps-dev", ipCidrRange: "10.0.48.0/20", privateIpGoogleAccess: true }
  serviceProjects: # Define service projects that need NetworkUser role on *this* host
    appProject: { enabled: true, name: "openlane-app-dev", id: "" } # KCC Project name & Needs Numerical ID
    loggingProject: { enabled: true, name: "openlane-logs-dev", id: "" } # KCC Project name & Needs Numerical ID

# 2. Application Project (Main App for Dev)
appProject:
  enabled: true
  project:
    name: "openlane-app-dev" # Full KCC Project resource name (GCP ID)
    id: "" # Hydrated numerical project ID
    gcpProjectName: "Openlane Application (Dev)"
    folderRef: "folders/openlane-org-app-dev" # KCC Folder resource name
  apis: ["compute.googleapis.com", "container.googleapis.com", "bigquery.googleapis.com", "storage.googleapis.com", "sqladmin.googleapis.com", "redis.googleapis.com", "dns.googleapis.com"]
  # Resource config overrides for this specific dev app project instance
  gkeCluster: { enabled: true, name: "openlane-dev-app-gke" } # (Inherits nodeCount/machineType from commonAppConfig.gkeCluster)
  bigquery: { enabled: true, name: "application-data-dev" } # (Inherits cmekEnabled=false from commonAppConfig.bigquery)
  storage: { enabled: true, name: "openlane-dev-app-data-bucket" }
  cloudsql: { enabled: true, instanceName: "openlane-dev-sql" }
  memorystore: { enabled: true, instanceName: "openlane-dev-redis" }
  dnsZone: { enabled: true, name: "openlane-dev-zone", domainName: "dev.openlane.com." }

# 3. Logging Project (Central Logging for Dev)
loggingProject:
  enabled: true
  project:
    name: "openlane-logs-dev" # Full KCC Project resource name (GCP ID)
    id: "" # Hydrated
    gcpProjectName: "Openlane Central Logging (Dev)"
    folderRef: "folders/openlane-org-logging-dev"
  logSinks:
    orgAudit:
      enabled: true
      destinationBucketName: "openlane-central-logs-bucket-dev"
      destinationDatasetName: "openlane_central_logs_dataset_dev"

# 4. Billing Project (Central Billing for Dev)
billingProject:
  enabled: true # Yes, typically exists in Dev too for testing
  project:
    name: "openlane-billing-dev" # Full KCC Project resource name (GCP ID)
    id: "" # Hydrated
    gcpProjectName: "Openlane Billing Admin (Dev)"
    folderRef: "folders/openlane-org-billing-dev"

kmsProject:
  enabled: true
  project:
    name: "openlane-kms-dev" # Unique name for dev
    id: "" # Hydrated
    gcpProjectName: "Openlane Central KMS (Dev)"
    folderRef: "folders/{{ .Values.folders.openlaneOrg.id }}" # Live under root org folder


folders:
  dev:
    displayName: "dev"
    parentType: "organization"
    parent: "319013011373"
    id: ""
  networking:
    displayName: "networking"
    parentType: "folder"
    parent: "dev"
    id: ""
  sharedInfra:
    displayName: "sharedInfra"
    parentType: "folder"
    parent: "dev"
    id: ""
  signals:
    displayName: "signals"
    parentType: "folder"
    parent: "dev"
    id: ""
  billing:
    displayName: "billing"
    parentType: "folder"
    parent: "dev"
    id: ""
  apps:
    displayName: "apps"
    parentType: "folder"
    parent: "dev"
    id: ""

projects:
  dev-bootstrap-project:
    displayName: "dev-bootstrap-project"
    parentType: "folder"
    parent: "bootstrap"
    id: ""
  dev-shared-network-project:
    displayName: "dev-shared-network-project"
    parentType: "folder"
    parent: "dev/networking"
    id: ""
  dev-shared-kms:
    displayName: "dev-shared-kms-project"
    parentType: "folder"
    parent: "dev/sharedInfra"
    id: ""
  dev-shared-secrets:
    displayName: "dev-shared-secrets-project"
    parentType: "folder"
    parent: "dev/sharedInfra"
    id: ""
  dev-signals-logging:
    displayName: "dev-signals-logging-project"
    parentType: "folder"
    parent: "dev/signals"
    id: ""
  dev-signals-monitoring:
    displayName: "dev-signals-monitoring-project"
    parentType: "folder"
    parent: "dev/signals"
    id: ""
  dev-billing-project:
    displayName: "dev-billing-project-project"
    parentType: "folder"
    parent: "dev/billing"
    id: ""
  dev-apps-project:
    displayName: "dev-apps-project-project"
    parentType: "folder"
    parent: "dev/apps"
    id: ""