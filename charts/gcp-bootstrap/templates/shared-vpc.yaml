{{- if .Values.sharedVPC.enabled }}
{{- range $svc := .Values.sharedVPC.serviceProjects }}
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeSharedVPCServiceProject
metadata:
  name: sharedvpc-{{ $svc | replace "_" "-" }}
spec:
  projectRef:
    external: {{ $svc }}
  hostProjectRef:
    external: {{ $.Values.sharedVPC.hostProjectId }}
---
{{- end }}
{{- end }}